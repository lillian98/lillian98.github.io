<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no" />
    <title>国庆游园会</title>
    <link rel="stylesheet" href="//static.360buyimg.com/jdcsh/babel/dist/css/parser.css">
    <script>/**
     * MobileWeb 通用功能助手，包含常用的 UA 判断、页面适配、search 参数转 键值对。
     * 该 JS 应在 head 中尽可能早的引入，减少重绘。
     *
     * fixScreen 方法根据两种情况适配，该方法自动执行。
     *      1. 定宽： 对应 meta 标签写法 --
     *          该方法会提取 width 值，主动添加 scale 相关属性值。
     *          注意： 如果 meta 标签中指定了 initial-scale， 该方法将不做处理（即不执行）。
     *      2. REM: 不用写 meta 标签，该方法根据 dpr 自动生成，并在 html 标签中加上 data-dpr 和 font-size 两个属性值。
     *          该方法约束：IOS 系统大 dpr = 3，其它系统 dpr = 1，页面每 dpr 大宽度（即页面宽度/dpr） = 750，REM 换算比值为 16。
     *          对应 css 开发，任何弹性尺寸均使用 rem 单位，rem 默认宽度为 视觉稿宽度 / 16;
     *              scss 中 $ppr(pixel per rem) 变量写法 -- $ppr: 750px/16/1rem;
     *                      元素尺寸写法 -- html { font-size: $ppr*1rem; } body { width: 750px/$ppr; }。

     */
    window.mobileUtil = (function(win, doc) {
        var UA = navigator.userAgent,
                isAndroid = /android|adr/gi.test(UA),
                isIos = /iphone|ipod|ipad/gi.test(UA) && !isAndroid, // 据说某些国产机的UA会同时包含 android iphone 字符
                isMobile = isAndroid || isIos;  // 粗略的判断

        return {
            isAndroid: isAndroid,
            isIos: isIos,
            isMobile: isMobile,

            isNewsApp: /NewsApp\/[\d\.]+/gi.test(UA),
            isWeixin: /MicroMessenger/gi.test(UA),
            isQQ: /QQ\/\d/gi.test(UA),
            isYixin: /YiXin/gi.test(UA),
            isWeibo: /Weibo/gi.test(UA),
            isTXWeibo: /T(?:X|encent)MicroBlog/gi.test(UA),

            tapEvent: isMobile ? 'tap' : 'click',

            /**
             * 缩放页面
             */
            fixScreen: function() {
                var metaEl = doc.querySelector('meta[name="viewport"]'),
                        metaCtt = metaEl ? metaEl.content : '',
                        matchScale = metaCtt.match(/initial\-scale=([\d\.]+)/),
                        matchWidth = metaCtt.match(/width=([^,\s]+)/);

                if ( !metaEl ) { // REM
                    var docEl = doc.documentElement,
                            maxwidth = docEl.dataset.mw || 750, // 每 dpr 大页面宽度
                            dpr = isIos ? Math.min(win.devicePixelRatio, 3) : 1,
                            scale = 1 / dpr,
                            tid;

                    docEl.removeAttribute('data-mw');
                    docEl.dataset.dpr = dpr;
                    metaEl = doc.createElement('meta');
                    metaEl.name = 'viewport';
                    metaEl.content = fillScale(scale);
                    docEl.firstElementChild.appendChild(metaEl);

                    var refreshRem = function() {
                        var width = docEl.getBoundingClientRect().width;
                        if (width / dpr > maxwidth) {
                            width = maxwidth * dpr;
                        }
                        var rem = width / 16;
                        docEl.style.fontSize = rem + 'px';
                    };

                    win.addEventListener('resize', function() {
                        clearTimeout(tid);
                        tid = setTimeout(refreshRem, 300);
                    }, false);
                    win.addEventListener('pageshow', function(e) {
                        if (e.persisted) {
                            clearTimeout(tid);
                            tid = setTimeout(refreshRem, 300);
                        }
                    }, false);

                    refreshRem();
                } else if ( isMobile && !matchScale && ( matchWidth && matchWidth[1] != 'device-width' ) ) { // 定宽
                    var	width = parseInt(matchWidth[1]),
                            iw = win.innerWidth || width,
                            ow = win.outerWidth || iw,
                            sw = win.screen.width || iw,
                            saw = win.screen.availWidth || iw,
                            ih = win.innerHeight || width,
                            oh = win.outerHeight || ih,
                            ish = win.screen.height || ih,
                            sah = win.screen.availHeight || ih,
                            w = Math.min(iw,ow,sw,saw,ih,oh,ish,sah),
                            scale = w / width;

                    if ( scale < 1 ) {
                        metaEl.content = metaCtt + ',' + fillScale(scale);
                    }
                }
                else{
                    //tmp process
                    var docEl = doc.documentElement,
                            maxwidth = docEl.dataset.mw || 750, // 每 dpr 大页面宽度
                            dpr = isIos ? Math.min(win.devicePixelRatio, 3) : 1,
                            scale = 1 / dpr,
                            tid;

                    docEl.removeAttribute('data-mw');
                    docEl.dataset.dpr = dpr;
                    metaEl = doc.querySelector('meta[name="viewport"]');
                    //metaEl.content = fillScale(scale);
                    var tArray = metaEl.content.split(',');
                    //metaEl.content = tArray[0]+ ',' + fillScale(scale) + ',' + tArray[3];

                    var refreshRem = function() {
                        var width = docEl.getBoundingClientRect().width;
                        if (width / dpr > maxwidth) {
                            width = maxwidth * dpr;
                        }
                        var rem = width / 16;
                        docEl.style.fontSize = rem + 'px';
                        if(window.location.href.indexOf('/visualediting/visualEditing.html?veBean.pageInstanceId')>-1){
                            docEl.style.fontSize = '20px';
                        }
                    };

                    win.addEventListener('resize', function() {
                        clearTimeout(tid);
                        tid = setTimeout(refreshRem, 300);
                    }, false);
                    win.addEventListener('pageshow', function(e) {
                        if (e.persisted) {
                            clearTimeout(tid);
                            tid = setTimeout(refreshRem, 300);
                        }
                    }, false);

                    refreshRem();
                }

                function fillScale(scale) {
                    return 'initial-scale=' + scale + ',maximum-scale=' + scale + ',minimum-scale=' + scale;
                }
            },

            /**
             * 转href参数成键值对
             * @param href {string} 指定的href，默认为当前页href
             * @returns {object} 键值对
             */
            getSearch: function(href) {
                href = href || win.location.search;
                var data = {},reg = new RegExp( "([^?=&]+)(=([^&]*))?", "g" );
                href && href.replace(reg,function( $0, $1, $2, $3 ){
                    data[ $1 ] = $3;
                });
                return data;
            }
        };
    })(window, document);

    // 默认直接适配页面
    mobileUtil.fixScreen();</script>
    <link rel="stylesheet" href="css/1001.css"/>
</head>
<body>
<!-- tracking -->
<div class="tracking hide">
    <script type="text/javascript">
        var jap = {
            siteId:'MO-J2011-1', // 站点编号，替换jaq的account字段
            autoLogPv:true        //  页面加载后自动上报pv
        };
    </script>
    <script type="text/javascript" src="//wl.jd.com/unify.min.js"></script>
</div>
<!--S container -->
<div id="J_bableOpt" class="bab_opt_con" data-activityId="3SuRYXJPCmnjBnib1FUVhUmvTG3" data-pageId="11491">
    <!-- S import m_header -->
    <div id="m_common_header" class="bab_opt_header hide"></div>
    <!-- E import m_header -->

    <div class="bab_opt_content">
        <div class="bab_opt_loading jdui_load">
            <span class="jdui_load_in"></span>
        </div>
        <div id="J_bableOptPage" class="bab_opt_page">
            <div class="bab_opt_mod bab_opt_mod_1 customcode" data-floorNum="1" data-template="customcode">
	<textarea class="template_code hide">
<!-- S loading -->
<div class="wrapper-loading" id="wrapperLoading">
    <div class="loading-ani">
        <div class="banner-balloon">
            <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active">
            <img src="http://img14.360buyimg.com/cms/jfs/t3106/364/2468944530/38532/ec9f0258/57e0dcfcN85d9f938.png" alt="" class="balloon-img-brand">
            <span class="balloon-text">JOY手机游乐园</span>
        </div>
        <div class="banner-status-wrap">
            <!-- banner-status-active、banner-status-wks、banner-status-yjs -->
            <div class="banner-ani banner-ani-rope">
                <img src="http://img13.360buyimg.com/cms/jfs/t3301/161/2325139147/34091/b1be51b6/57dfdaf7N36b21bf2.png" alt="" class="banner-ani-rope-active"/>
            </div>
            <div class="banner-ani banner-ani-btn" id="">
                <img src="http://img12.360buyimg.com/cms/jfs/t3079/181/2369165304/38627/11d30cbb/57dfdaf7Nce07c048.png" alt="" class="banner-ani-btn-active"/>
            </div>
            <div class="banner-ani banner-ani-joy"></div>
            <div class="banner-ani banner-ani-gas"><img src="http://img14.360buyimg.com/cms/jfs/t3067/342/2353427324/2517/6c407c6b/57dfdaf6N6a713957.png" alt=""/></div>
        </div>
    </div>

    <div class="loading-process">
        <div class="loading-process-no" id="loadingProcessNo"></div>
        <div class="loading-process-ed" id="loadingProcess" style="width: 0"></div>
    </div>
    <p class="loading-process-p">Loading</p>
</div>
<!-- E loading -->
<!-- S nav -->
<div class="buttom_suction bt_nav_module bt_3x" style="background-color:#0063a0;">
    <ul>
        <li>
            <a class="J_ping" href="http://h5.m.jd.com/active/2U6YTCS93szF8S37NBwgQn79AKYd/index.html" target="_self">
                <div class="bt_img_wrap no_bg_img">
                    <img data-src="" src="//m.360buyimg.com/babel/s358x358_jfs/t3283/356/2370782551/6949/cd335e22/57e0d63aN4e3cbac4.png!q70.jpg" alt="" class="fadein">
                    <img data-src="" src="//m.360buyimg.com/babel/s358x358_jfs/t3292/338/2325317327/11797/bf5d74b8/57e0d664N1f040392.png!q70.jpg" class="fadein">
                </div>
            </a>
        </li>
        <li>
            <a class="J_ping" href="http://h5.m.jd.com/active/3GJRQTTnutBfFeXyTxyFVxRgeCwX/index.html">
                <div class="bt_img_wrap no_bg_img">
                    <img data-src="" src="//m.360buyimg.com/babel/s358x358_jfs/t3052/181/2391879646/6907/3b19375a/57e0d9ceNe0533dcf.png!q70.jpg" alt="" class="fadein">
                    <img data-src="" src="//m.360buyimg.com/babel/s358x358_jfs/t3214/195/2343296436/6993/864de6ad/57e0d9d8Nb8d0f5ef.png!q70.jpg" class="fadein">
                </div>
            </a>
        </li>
        <li class="cur">
            <a class="J_ping" href="javascript:void(0)">
                <div class="bt_img_wrap no_bg_img">
                    <img data-src="" src="//m.360buyimg.com/babel/s358x358_jfs/t3067/263/2415282401/7450/87f768a5/57e0d6a8N7c9a3e30.png!q70.jpg" alt="" class="fadein">
                    <img data-src="" src="//m.360buyimg.com/babel/s358x358_jfs/t3145/145/2369635059/7491/ffb27c80/57e0d6b9N59828ab9.png!q70.jpg" class="fadein">
                </div>
            </a>
        </li>
    </ul>
</div>
<!-- E nav -->
<!-- S wrapper -->
<div class="wrapper" id="wrapper">
    <!-- S banner -->
    <div class="wrap-banner">
        <!-- @fixme： 测试用，要删除 -->
        <!--<div onclick="$('.balloon-active').addClass('balloon-active-boom')">气球爆炸</div>
        <div onclick="$('.balloon-active').removeClass('balloon-active-boom')">气球正常</div>-->
        <img src="http://img12.360buyimg.com/cms/jfs/t3289/226/2298505682/137299/4b8f3706/57df991fN02e1f595.jpg"
             alt="" width="100%"/>
        <img src="http://img10.360buyimg.com/cms/jfs/t3166/81/2289497998/26569/8a2f9222/57df9933N29fbc460.png" alt="" width="100%"/>
        <div class="banner-overflow-wrap" id="bannerBalloonWrap">
            <div class="banner-balloon-div" id="bannerBalloonDiv">
                <div class="banner-balloon">
                    <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active"/>
                    <img src="http://img30.360buyimg.com/cms/jfs/t3046/309/2271453327/196729/a30c84c1/57dfa7d4N0eeb2ec1.png" alt="" class="balloon-img-no-active"/>
                    <img src="//img10.360buyimg.com/cms/jfs/t3202/71/2815028378/11874/98f4dabb/57e63a38Neb8a0a29.png" alt="" class="balloon-img-brand"/>
                    <span class="balloon-text">安全新高度</span>
                </div>
                <div class="banner-balloon">
                    <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active"/>
                    <img src="http://img30.360buyimg.com/cms/jfs/t3046/309/2271453327/196729/a30c84c1/57dfa7d4N0eeb2ec1.png" alt="" class="balloon-img-no-active"/>
                    <img src="//img30.360buyimg.com/cms/jfs/t3196/46/2761063910/10302/fbfd0d8/57e63a39N1d8f40eb.png" alt="" class="balloon-img-brand"/>
                    <span class="balloon-text">超越不可能</span>
                </div>
                <div class="banner-balloon">
                    <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active"/>
                    <img src="http://img30.360buyimg.com/cms/jfs/t3046/309/2271453327/196729/a30c84c1/57dfa7d4N0eeb2ec1.png" alt="" class="balloon-img-no-active"/>
                    <img src="//img30.360buyimg.com/cms/jfs/t3226/120/2776180455/13269/3983c1a1/57e63a38Nc3cc48ab.png" alt="" class="balloon-img-brand"/>
                    <span class="balloon-text">小米之家</span>
                    <!-- S gotCoupon -->
                    <!--<div class="wrapper-got-coupon" id="wrapperGotCoupon">
                        <img src="http://img13.360buyimg.com/cms/jfs/t3148/347/2609014977/67942/529d7b11/57e3d7deNe4d0fac8.png" alt=""/>
                        <div id="wrapGotInfo" class="wrap-got-info wrap-tips-info">
                            <img src="http://img11.360buyimg.com/cms/jfs/t3286/170/2703742425/11652/4195ee66/57e3ad4dNf20fe828.png" alt="" id="gotInfoImg" class="got-info-brand tip-info-brand"/>
                            <strong id="gotInfoMoney" class="tip-info-money got-info-money">25</strong>
                            <span id="gotInfoLimit" class="tip-info-limit got-info-limit">满1199可用</span>
                        </div>
                    </div>-->
                    <!-- E gotCoupon -->
                </div>
                <div class="banner-balloon">
                    <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active"/>
                    <img src="http://img30.360buyimg.com/cms/jfs/t3046/309/2271453327/196729/a30c84c1/57dfa7d4N0eeb2ec1.png" alt="" class="balloon-img-no-active"/>
                    <img src="//img12.360buyimg.com/cms/jfs/t3064/180/2821390936/9795/e3fbd632/57e63a38N9d3b5f6e.png" alt="" class="balloon-img-brand"/>
                    <span class="balloon-text">因爱而生</span>
                </div>
                <div class="banner-balloon">
                    <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active"/>
                    <img src="http://img30.360buyimg.com/cms/jfs/t3046/309/2271453327/196729/a30c84c1/57dfa7d4N0eeb2ec1.png" alt="" class="balloon-img-no-active"/>
                    <img src="//img10.360buyimg.com/cms/jfs/t3163/140/2736658456/9419/e78ddc8b/57e63a38Nc3ff0b10.png" alt="" class="balloon-img-brand"/>
                    <span class="balloon-text">所品不凡</span>
                </div>
                <div class="banner-balloon">
                    <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active"/>
                    <img src="http://img30.360buyimg.com/cms/jfs/t3046/309/2271453327/196729/a30c84c1/57dfa7d4N0eeb2ec1.png" alt="" class="balloon-img-no-active"/>
                    <img src="//img12.360buyimg.com/cms/jfs/t3157/50/2794386732/11800/3738347b/57e63a39Na602ee87.png" alt="" class="balloon-img-brand"/>
                    <span class="balloon-text">连接你我他</span>
                </div>
                <div class="banner-balloon">
                    <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active"/>
                    <img src="http://img30.360buyimg.com/cms/jfs/t3046/309/2271453327/196729/a30c84c1/57dfa7d4N0eeb2ec1.png" alt="" class="balloon-img-no-active"/>
                    <img src="//img10.360buyimg.com/cms/jfs/t3274/243/2751977959/10156/14edd781/57e63a38N5e18b5d8.png" alt="" class="balloon-img-brand"/>
                    <span class="balloon-text">一元抢宝</span><span class="balloon-img-boom"></span>
                </div>
                <div class="banner-balloon">
                    <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active"/>
                    <img src="http://img30.360buyimg.com/cms/jfs/t3046/309/2271453327/196729/a30c84c1/57dfa7d4N0eeb2ec1.png" alt="" class="balloon-img-no-active"/>
                    <img src="//img10.360buyimg.com/cms/jfs/t3190/317/2786249584/8810/ce310899/57e63a39N903d770a.png" alt="" class="balloon-img-brand"/>
                    <span class="balloon-text">创意畅享馆</span>
                </div>
                <div class="banner-balloon">
                    <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active"/>
                    <img src="http://img30.360buyimg.com/cms/jfs/t3046/309/2271453327/196729/a30c84c1/57dfa7d4N0eeb2ec1.png" alt="" class="balloon-img-no-active"/>
                    <img src="//img12.360buyimg.com/cms/jfs/t3211/108/2771581744/9350/cfb018fb/57e63a38Ne2aa8fd1.png" alt="" class="balloon-img-brand"/>
                    <span class="balloon-text">电影旅行</span>
                </div>
                <div class="banner-balloon">
                    <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active"/>
                    <img src="http://img30.360buyimg.com/cms/jfs/t3046/309/2271453327/196729/a30c84c1/57dfa7d4N0eeb2ec1.png" alt="" class="balloon-img-no-active"/>
                    <img src="//img11.360buyimg.com/cms/jfs/t3253/344/2834759483/23257/7595cf89/57e63a38N87723b89.png" alt="" class="balloon-img-brand"/>
                    <span class="balloon-text">聚你所想</span>
                </div>
                <div class="banner-balloon">
                    <img src="http://img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png" alt="" class="balloon-img-active"/>
                    <img src="http://img30.360buyimg.com/cms/jfs/t3046/309/2271453327/196729/a30c84c1/57dfa7d4N0eeb2ec1.png" alt="" class="balloon-img-no-active"/>
                    <img src="//img12.360buyimg.com/cms/jfs/t3154/106/2780633075/15851/fc366141/57e63a38Nbf2ebab7.png" alt="" class="balloon-img-brand"/>
                    <span class="balloon-text">链接全世界</span>
                </div>
            </div>

        </div>
        <div class="banner-status-wrap banner-status-active banner-status-wrap-show " id="bannerStatusWrap">
            <!-- banner-status-active、banner-status-wks、banner-status-yjs -->
            <div class="banner-ani banner-ani-rope">
                <img src="http://img13.360buyimg.com/cms/jfs/t3301/161/2325139147/34091/b1be51b6/57dfdaf7N36b21bf2.png" alt="" class="banner-ani-rope-active"/>
                <img src="http://img30.360buyimg.com/cms/jfs/t3259/182/2433158820/64042/57e4dd4/57e11604Na1ba2db3.png" alt="" class="banner-ani-rope-yjs"/>
            </div>
            <div class="banner-ani banner-ani-joy"></div>
            <div class="banner-ani banner-ani-btn-tip"><img src="http://img11.360buyimg.com/cms/jfs/t3283/135/2560953824/13919/749b2e25/57e34f81Nb3e25202.png" alt=""/></div>
            <div class="banner-ani banner-ani-btn" id="startBtn">
                <img src="http://img12.360buyimg.com/cms/jfs/t3079/181/2369165304/38627/11d30cbb/57dfdaf7Nce07c048.png" alt="" class="banner-ani-btn-active"/>
                <img src="http://img10.360buyimg.com/cms/jfs/t3304/56/2425710266/182522/3711ab0d/57e11be9N6622ea44.png" alt="" class="banner-ani-btn-yjs"/>
            </div>
            <div class="banner-ani banner-ani-btn-text" id="startTextBtn"><img src="http://img14.360buyimg.com/cms/jfs/t3286/207/2398056037/13032/66d78972/57dfdaf7N0a26e064.png" alt="" class="banner-ani-btn-text-daqi"/><img
                    src="http://img10.360buyimg.com/cms/jfs/t3241/96/2431014972/9048/6d743729/57e10f14N52dfb393.png" alt="" class="banner-ani-btn-text-wks"/><img
                    src="http://img13.360buyimg.com/cms/jfs/t3163/62/2475907306/6022/65bc2551/57e110aaNeba2314c.png" alt="" class="banner-ani-btn-text-yjs"/></div>
            <div class="banner-ani banner-ani-gas"><img src="http://img14.360buyimg.com/cms/jfs/t3067/342/2353427324/2517/6c407c6b/57dfdaf6N6a713957.png" alt=""/></div>
        </div>
        <!-- S banner-btn -->
        <a href="http://h5.m.jd.com/active/2U6YTCS93szF8S37NBwgQn79AKYd/index.html" class="banner-btn banner-btn-main"><img
                src="//img11.360buyimg.com/cms/jfs/t3280/338/2796531845/5321/fbd88e3/57e63a38N47b9158b.png" alt=""/></a>
        <a href="javascript:void(0)" class="banner-btn banner-btn-rule" id="btnRule"><img src="//img13.360buyimg.com/cms/jfs/t3286/25/2918335255/1575/e1837486/57e63a38Nfd0ee8f8.png" alt=""/></a>
        <!-- E banner-btn -->
    </div>
    <!-- E banner -->
    <!-- S floor -->
    <div class="wrap-floor" id="wrapFloor">

    </div>
    <!-- E floor -->
    <!-- S tips -->
    <div class="wrapper-success" id="wrapperSuccess">
        <img src="http://img30.360buyimg.com/cms/jfs/t3103/343/2652278922/53545/bb0f9b46/57e3b283Nfab3f9b9.png" alt="" class="suc-tip-bg tip-bg">
        <div id="wrapSuccessInfo" class="wrap-suc-info wrap-tips-info">
            <img src="//img11.360buyimg.com/cms/jfs/t3112/276/2808643506/4066/5754bb11/57e66d73Ne069d963.png" alt="" id="sucInfoImg" class="tip-info-brand suc-info-brand"/>
            <strong id="sucInfoMoney" class="tip-info-money">25</strong>
            <span id="sunInfoLimit" class="tip-info-limit">满1199可用</span>
            <p class="suc-info-text suc-info-text-small suc-info-text-limit">限购买<span id="sunInfoBrand">360</span>品牌商品，有效期到<span id="sunInfoDate">2016.09.27</span></p>
        </div>
        <a href="javascript:;" id="closeBtn2"></a>
        <a href="javascript:;" id="shoppingBtn" class="suc-btn suc-btn-shop"></a>
        <a href="javascript:;" id="shareBtn" class="suc-btn suc-btn-share"></a>
    </div>
    <!-- E tips -->
<!-- S rule -->
<div class="wrapper-rule" id="wrapperRule">
    <h4 class="rule-hd">活动规则</h4>
    <div class="rule-bd">
        <p>1、活动时间：09月27日 00:00:00 - 10月07日23:59:59；</p>
        <p>2、活动期间，每天登录活动页面，参加给品牌打气的活动，每天可以给一个品牌打气，完成给气球打气的任务，即有机会获得一张优惠券；</p>
        <p>3、每天每位用户最多给品牌打气3次；</p>
        <p>4、优惠券使用范围：</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;①品类券仅限京东自营手机品类使用，特殊注明不可使用东券商品除外；</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;②品牌券仅限该品牌的京东自营手机使用，具体适用范围以优惠券说明为准；</p>
        <p>5、优惠券有效期： 以优惠券说明为准。</p>
    </div>
    <a href="javascript:void(0)" id="closeRule" class="rule-btn-close"></a>
    <a href="javascript:void(0)" id="closeRule1" class="rule-btn-known"></a>
</div>
<!-- E rule -->
    <!-- S tips-press-error -->
    <div id="wrapperError">
        <p class="wrapper-error-text"></p>
    </div>
    <!-- E tips-press-error -->
</div>
<!-- E wrapper -->

<script id="branchHallTpl" type="text/x-template">
    <div class="z-three">
        <% obj.list.forEach(function(item, index){ %>
        <a href="http://item.m.jd.com/ware/view.action?wareId=<%= item.skuId %>" target="_blank">
            <img src="<%= item.image %>" width="80%" height="auto" data-jumpUrl="<%= item.linkType %>,<%= item.link %>" data-event_param="<%= obj.groupName %>_<%= item.name %>_<%= item.link %>" />
            <span class="goods-name"><%= item.name %></span>
            <span class="goods-price"><%= item.jdPrice %></span>
        </a>
        <% }) %>
    </div>
</script>
<script id="branchHallHdTpl" type="text/x-template">
    <% obj.list.forEach(function(item, index){ %>
    <a href="<%= item.url %>" target="_blank">
        <img src="<%= item.pictureUrl %>" width="100%" height="auto"
             data-jumpUrl="<%= item.linkType %>,<%= item.link %>"
             data-event_param="<%= obj.groupName %>_<%= item.name %>_<%= item.link %>"
             style="position:relative;z-index=2;"/>
    </a>
    <% }) %>
</script>
        <script type="text/javascript">
            window.PreLoad = function (a, b) {
                var c = b || {};
                this.source = a, this.count = 0, this.total = a.length, this.onload = c.onload, this.prefix = c.prefix || "", this.init()
            };
            PreLoad.prototype.init = function () {
                var a = this;
                a.source.forEach(function (b) {
                    var c = b.substr(b.lastIndexOf(".") + 1).toLowerCase(), d = a.prefix + b;
                    switch (c) {
                        case"js":
                            a.script.call(a, d);
                            break;
                        case"css":
                            a.stylesheet.call(a, d);
                            break;
                        case"svg":
                        case"jpg":
                        case"gif":
                        case"png":
                        case"jpeg":
                            a.image.call(a, d)
                    }
                })
            }, PreLoad.prototype.getProgress = function () {
                return Math.round(this.count / this.total * 100)
            }, PreLoad.prototype.image = function (a) {
                var b = document.createElement("img");
                this.load(b, a), b.src = a
            }, PreLoad.prototype.stylesheet = function (a) {
                var b = document.createElement("link");
                this.load(b, a), b.rel = "stylesheet", b.type = "text/css", b.href = a, document.head.appendChild(b)
            }, PreLoad.prototype.script = function (a) {
                var b = document.createElement("script");
                this.load(b, a), b.type = "text/javascript", b.src = a, document.head.appendChild(b)
            }, PreLoad.prototype.load = function (a, b) {
                var c = this;
                a.onload = a.onerror = a.onabort = function (a) {
                    c.onload && c.onload({count: ++c.count, total: c.total, item: b, type: a.type})
                }
            };
        </script>
        <script>
            Array.prototype.unique = function () {
                this.sort();
                var re = [this[0]];
                for (var i = 1; i < this.length; i++) {
                    if (this[i] !== re[re.length - 1]) {
                        re.push(this[i]);
                    }
                }
                return re;
            };
            require(['zepto', 'http://h5.m.jd.com/active/YHxu7oUPY8tTHjqCTVFGwkp1LU1/pages/8782/js/jdShare.js','js/spin.min.js','js/jworker.js','js/request.js'], function ($, jdShare) {
                var getCookie = function (name) {
                    var strCookie = document.cookie;
                    var arrCookie = strCookie.split("; ");
                    for (var i = 0; i < arrCookie.length; i++) {
                        var arr = arrCookie[i].split("=");
                        if (name == arr[0]) {
                            return arr[1];
                        }
                    }
                    return "";
                };

                var getQueryString = function (name) {
                    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
                    var r = window.location.search.substr(1).match(reg);
                    if (r != null) {
                        return unescape(r[2]);
                    }
                    return null;
                };


                var ruleControl = function(){
                    return {
                        show: function () {
                            $('#wrapperRule').fadeIn();
                        },
                        hide: function () {
                            $('#wrapperRule').fadeOut();
                        },
                    }
                }();

                //@fixme delete start obj,process obj,floor obj,state obj

                var apis = (function () {

                    var _sid = null;
                    var _remainLotteryChance = 0;

                    var jiangSuccess = function (r) {
                        var t = r.data.moduleName.split('-');//生活旅行-250-19990
                        var tName = t[0];
                        var tMoney = t[1];
                        var tLimit = t[2];
                        $('#sucInfoMoney').html(tMoney);
                        $('#sunInfoLimit').html(tLimit);
                        $('#sunInfoBrand').html(tName);
                        $('#sucInfoImg').attr('src',lotteryBrandPic[curDateIndex]);
                        $('#wrapperSuccess').fadeIn();
                    };

                    var noLotteryText = ['哎呀，换个姿势再玩一次','不要着急，休息，休息一下','点啊点，点到外婆桥'];
                    var pageInfo = {
                        aid: '3SuRYXJPCmnjBnib1FUVhUmvTG3',//activityId
                        pid: '6611',//pageId
                    }
                    var lotterModuleId = ['2dZ8PbS7iZ4tzyaS8uQammzLiRkQ','3hhsEj6ReXCyPiimafqS3hYWq5iF','2fs4cdZRfNJSv1sQq7bLmBRgwfmj','rRU5c6BJUACu9Qgo5xZzGyoTMyM','YWXsrQXGnRBL1zJXwjctGnE7Vyt','42Ms2dC1wqFVkfoVWHkKyfi3SXge','xD23rTXrmxGwsbWqoyJBEePSAXx','2yiYQLGAJcjvxXiNrY6RJVseCqVg','NTS5RNV4K1ETdmfUkVmUYs4bjKh','2ibJ2433VCx1EQxzGchUr19HfDAs','3v9tHtr7ui5yBwrHSVCRLLcdH3CT'];
                    var lotteryBrandPic = ['//img11.360buyimg.com/cms/jfs/t3112/276/2808643506/4066/5754bb11/57e66d73Ne069d963.png',
                        '//img13.360buyimg.com/cms/jfs/t3109/353/2828904558/3918/b882ccf2/57e66d73N4e9cc807.png',
                        '//img12.360buyimg.com/cms/jfs/t3049/207/2838450169/6090/80d6a6fa/57e66d72Nbadf2087.png',
                        '//img20.360buyimg.com/cms/jfs/t3262/228/2743437704/2894/7db85657/57e66d72Nc11586a2.png',
                        '//img10.360buyimg.com/cms/jfs/t3307/302/2741307652/2316/bb95e628/57e66d72Na86fc64b.png',
                        '//img12.360buyimg.com/cms/jfs/t3271/52/2866174717/5219/97a60119/57e66d72Nce6a4ee9.png',
                        '//img13.360buyimg.com/cms/jfs/t3175/240/2785228070/3146/fdc1d03f/57e66d72N1527dffb.png',
                        '//img12.360buyimg.com/cms/jfs/t3247/220/2793065401/2198/d396553e/57e66d72N37837557.png',
                        '//img13.360buyimg.com/cms/jfs/t3265/228/2775699679/2139/ad1205f3/57e66d72N91b04bac.png',
                        '//img14.360buyimg.com/cms/jfs/t3151/146/2733453105/16534/84199e0f/57e66d72Ncfbca768.png',
                        '//img30.360buyimg.com/cms/jfs/t3202/141/2776006399/5223/fd691d4f/57e66d72N66b14b37.png'];
                    var jiangFail = function () {
                        $('#wrapperError p').html(this.text);
                        if( this.code == '6-1' || this.code == '1'){
                            var tIndex = Math.ceil(Math.random()*noLotteryText.length) - 1;
                            $('#wrapperError p').html(noLotteryText[tIndex]);
                        }
                        $('.balloon-active').addClass('balloon-active-reset').removeClass('balloon-active-boom');
                        $('#bannerStatusWrap').removeClass('banner-status-ani');//打气动画暂停复位
                            $('#wrapperError').fadeIn(500);

                        setTimeout(function () {
                            $('#wrapperError')
                                    .fadeOut(500);
                        }, 1500);
                        setTimeout(function(){
                            $('.balloon-active').removeClass('balloon-active-reset');
                        },3000);
                    };

                    var jiang = [
                        {code: '0', text: '中奖', func: jiangSuccess},
                        {code: '1', text: '未中奖', func: jiangFail},
                        {code: '1-1', text: '活动尚未开始', func: jiangFail},
                        {code: '1-2', text: '活动已经结束', func: jiangFail},
                        {code: '1-3', text: '该抽奖组件尚未开始', func: jiangFail},
                        {code: '1-4', text: '该抽奖组件已经结束', func: jiangFail},
                        {code: '3-1', text: '用户风险等级不满足', func: jiangFail},
                        {code: '3-2', text: '等级不够', func: jiangFail},
                        {code: '4-2', text: '抽奖次数不足', func: jiangFail},
                        {code: '4-5', text: '中奖次数不足', func: jiangFail},
                        {code: '5-1', text: '优惠券库存扣减失败', func: jiangFail},
                        {code: '5-2', text: '优惠券发放失败', func: jiangFail},
                        {code: '5-3', text: '保存领奖信息失败', func: jiangFail},
                        {code: '5-4', text: '更新用户领奖信息失败', func: jiangFail},
                        {code: '6-1', text: '未中奖', func: jiangFail},
                        {code: '6-2', text: '优惠券发发数量限制', func: jiangFail},
                        {code: '6-3', text: '该组件的优惠券全部发完', func: jiangFail},
                        {code: '6-4', text: '该分期的优惠券全部发完', func: jiangFail},
                    ];

                    var jiangFunc = function (data) {
                        console.log(data);
                        switch (data.code) {
                            case '3':
                                console.log('未登录');
                                window.parent.location.href = 'https://passport.m.jd.com/user/login.action?v=1&returnurl=' + encodeURIComponent(window.parent.location.href);
                                break;
                            case '0':
                                console.log('通信成功');
                                    if(parseInt(data.leftLuckDrawNum) == 0){
                                        setTimeout(function(){
                                            $('#wrapper').addClass('wrapper-no-chance');
                                            $('#wrapper .banner-ani-btn-tip img').attr('src','//img14.360buyimg.com/cms/jfs/t3124/32/2779487336/4276/e1b98981/57e66d72N797f94d1.png');
                                        },3000);
                                    }
                                $.each(jiang, function (key, value) {
                                    if (value.code == data.subCode) {
                                        if (value.func != '') {
                                            value.func.call(this, {data : data});
                                        }
                                        return false;
                                    }
                                });
                                break;
                            case '1':
                                console.log('通信失败');
                                break;
                        }
                    };

                    return {
                        isLogin     : function () {
                            var sid = getQueryString('sid') || getCookie('sid');
                            console.log(sid);
                            return $.get('http://h5.m.jd.com/h5api.jsp?functionid=h5CheckLogin&sid=' + sid, function (r) {
                                if (typeof r == 'string') {
                                    r = JSON.parse(r);
                                }
                                if (r.errno == 0 && r.code == '0') {
                                    _sid = r.sid;
                                    apis.queryLottery();
                                    return _sid;
                                } else {
                                    //@fixme!!! 发布时把query改成上面注释的代码
                                    window.parent.location.href = 'https://passport.m.jd.com/user/login.action?v=1&returnurl=' + encodeURIComponent(window.parent.location.href);
                                    //apis.queryLottery();
                                    return false;
                                }
                            });
                        },
                        lottery     : function () {
                            babel.babelActivityLuckDraw({
                                data   : {
                                    sid: _sid,//sessionId
                                    aid: pageInfo.aid,//activityId
                                    pid: pageInfo.pid,//pageId
                                    mid: lotterModuleId[curDateIndex]//moduleId
                                },
                                success: function (r) {
                                    setTimeout(function () {
                                        jiangFunc(r);//@fixme 领券提示
                                    }, 1000);
                                },
                                error  : function (r) {
                                    $('#wrapperError')
                                            .fadeIn();
                                    setTimeout(function () {
                                        $('#closeBtn2')
                                                .trigger('click');
                                    }, 3000);
                                }
                            });
                        },
                        queryLottery: function (func) {
                            _sid = getQueryString('sid') || getCookie('sid');
                            console.log(_sid);
                            $.get('http://h5.m.jd.com/h5api.jsp', {
                                functionid: 'babelQueryActivity&client=wh5&clientVersion=1.0.0&',
                                body      : JSON.stringify({
                                    "activityId": pageInfo.aid,
                                    "pageId"    : pageInfo.pid,
                                    "moduleId"  : lotterModuleId[curDateIndex],
                                    "sid"       : _sid,
                                })
                            }, func);
                        }
                    }

                })();

                var loadImg = function (func) {
                    var tasks = (function () {
                        var list = [
                            '//img12.360buyimg.com/cms/jfs/t3289/226/2298505682/137299/4b8f3706/57df991fN02e1f595.jpg',/* banner.jpg */
                            '//img11.360buyimg.com/cms/jfs/t3055/159/2758614569/7764/cce224d1/57e63a39N48b0606b.png',/* banner-bottom */
                            '//img30.360buyimg.com/cms/jfs/t3235/82/2302056846/90205/a9d6eec1/57df8924Nd56326b5.png',/* balloon-active */
                            '//img20.360buyimg.com/cms/jfs/t3280/305/2815172431/10296/360b115f/57e63a38Nf365513a.png',/* rope-yjs */
                            '//img10.360buyimg.com/cms/jfs/t3295/9/2757323329/20144/bdda7fa5/57e63a38Nb5851bfa.png',/* joy */
                            '//img12.360buyimg.com/cms/jfs/t3304/123/2822275569/14078/b0d5a328/57e63a38N6a3b4f4b.png',/* btn */
                            '//img12.360buyimg.com/cms/jfs/t3274/273/2708146138/6290/c3fddb74/57e63a39N08ab5fff.png',/* changandaqi */
                            '//img12.360buyimg.com/cms/jfs/t3307/359/2734110455/976/91ef5035/57e63a38N08fc40d9.png',/* gas */
                            '//img12.360buyimg.com/cms/jfs/t3304/92/2810482214/65731/95bab4ab/57e63a39N4f975c2e.png',/* balloon-no-active tiny */
                            '//img12.360buyimg.com/cms/jfs/t3190/300/2804327546/8869/f4350281/57e63a38N6d10ceaf.png',/* rope */
                            '//img12.360buyimg.com/cms/jfs/t3280/13/2811486113/4117/f48f5895/57e63a39N2332e626.png',/* btn-text-wks */
                            '//img14.360buyimg.com/cms/jfs/t3277/113/2811645988/2466/19222c01/57e63a38Nf01f2410.png',/* btn-text-yjs */
                                '//img11.360buyimg.com/cms/jfs/t3280/338/2796531845/5321/fbd88e3/57e63a38N47b9158b.png',/* back to main icon */
                                '//img13.360buyimg.com/cms/jfs/t3286/25/2918335255/1575/e1837486/57e63a38Nfd0ee8f8.png',/* rule */
                                '//img14.360buyimg.com/cms/jfs/t3094/129/2716181686/4900/bb7df838/57e63a38N5a89310f.png',/* tips-changandabaoqiqiu */
                                '//img13.360buyimg.com/cms/jfs/t3049/12/2779613853/55281/97c40087/57e63a38N4022257e.png',/* btn-yjs */
                                '//img10.360buyimg.com/cms/jfs/t3202/71/2815028378/11874/98f4dabb/57e63a38Neb8a0a29.png',/* logo1 */
                                '//img30.360buyimg.com/cms/jfs/t3196/46/2761063910/10302/fbfd0d8/57e63a39N1d8f40eb.png',/* logo2 */
                                '//img30.360buyimg.com/cms/jfs/t3226/120/2776180455/13269/3983c1a1/57e63a38Nc3cc48ab.png',/* logo3 */
                                '//img12.360buyimg.com/cms/jfs/t3064/180/2821390936/9795/e3fbd632/57e63a38N9d3b5f6e.png',/* logo4 */
                                '//img10.360buyimg.com/cms/jfs/t3163/140/2736658456/9419/e78ddc8b/57e63a38Nc3ff0b10.png',/* logo5 */
                                '//img12.360buyimg.com/cms/jfs/t3157/50/2794386732/11800/3738347b/57e63a39Na602ee87.png',/* logo6 */
                                '//img10.360buyimg.com/cms/jfs/t3274/243/2751977959/10156/14edd781/57e63a38N5e18b5d8.png',/* logo7 */
                                '//img10.360buyimg.com/cms/jfs/t3190/317/2786249584/8810/ce310899/57e63a39N903d770a.png',/* logo8 */
                                '//img12.360buyimg.com/cms/jfs/t3211/108/2771581744/9350/cfb018fb/57e63a38Ne2aa8fd1.png',/* logo9 */
                                '//img11.360buyimg.com/cms/jfs/t3253/344/2834759483/23257/7595cf89/57e63a38N87723b89.png',/* logo10 */
                                '//img12.360buyimg.com/cms/jfs/t3154/106/2780633075/15851/fc366141/57e63a38Nbf2ebab7.png',/* logo11 */
                                '//img14.360buyimg.com/cms/jfs/t3124/32/2779487336/4276/e1b98981/57e66d72N797f94d1.png',/* tips-used */
                                '//img11.360buyimg.com/cms/jfs/t3112/276/2808643506/4066/5754bb11/57e66d73Ne069d963.png',/* suc-brand logo 1*/
                                '//img13.360buyimg.com/cms/jfs/t3109/353/2828904558/3918/b882ccf2/57e66d73N4e9cc807.png',
                                '//img12.360buyimg.com/cms/jfs/t3049/207/2838450169/6090/80d6a6fa/57e66d72Nbadf2087.png',
                                '//img20.360buyimg.com/cms/jfs/t3262/228/2743437704/2894/7db85657/57e66d72Nc11586a2.png',
                                '//img10.360buyimg.com/cms/jfs/t3307/302/2741307652/2316/bb95e628/57e66d72Na86fc64b.png',
                                '//img12.360buyimg.com/cms/jfs/t3271/52/2866174717/5219/97a60119/57e66d72Nce6a4ee9.png',
                                '//img13.360buyimg.com/cms/jfs/t3175/240/2785228070/3146/fdc1d03f/57e66d72N1527dffb.png',
                                '//img12.360buyimg.com/cms/jfs/t3247/220/2793065401/2198/d396553e/57e66d72N37837557.png',
                                '//img13.360buyimg.com/cms/jfs/t3265/228/2775699679/2139/ad1205f3/57e66d72N91b04bac.png',
                                '//img14.360buyimg.com/cms/jfs/t3151/146/2733453105/16534/84199e0f/57e66d72Ncfbca768.png',
                                '//img30.360buyimg.com/cms/jfs/t3202/141/2776006399/5223/fd691d4f/57e66d72N66b14b37.png'
                        ];
                        return list;
                    })();

                    /* loading */
                    var loadingDom = (function(){
                        var obj = {
                            loadingEd : $('#loadingProcess'),
                            loadingNo : $('#loadingProcessNo'),
                            loadingWrap : $('#wrapperLoading'),
                            mainWrap : $('#wrapper'),
                        }
                        return {
                            showProcess :function(_no,_total){
                                var t = parseInt(_no/_total*100);
                                obj.loadingEd.css('width',t+'%');
                                obj.loadingNo.html(t+'%');
                            },
                            hide : function(){
                                obj.loadingWrap.css('opacity',0);
                                obj.mainWrap.css('opacity',1);
                                setTimeout(function(){
                                    obj.loadingWrap.hide();
                                },200)
                            }
                        };
                    })();

                    new PreLoad(tasks, {
                        onload: function (load) {
                            loadingDom.showProcess(load.count,load.total);
                            if (load.count == load.total) {
                                loadingDom.hide();
                                func();
                            }
                        }
                    });
                };

                var specialHref = ['https://1.m.jd.com/detail/next?itemId=1200000000000121201','https://1.m.jd.com/detail/next?itemId=1400000000000110003','https://1.m.jd.com/detail/next?itemId=1200000000000110809'];
                var init = (function () {
                    try {
                        jdShare && jdShare.setShareInfo({
                            title   : 'Apple新品首发预约  全民寻宝赢免单神券!',
                            content : 'Apple新品首发预约  全民寻宝赢免单神券!',
                            url     : 'http://h5.m.jd.com/active/3wX17ys13EaDtijVP6KnfrBucNhV/index.html',
                            img     : 'http://img12.360buyimg.com/cms/jfs/t3052/363/1513970130/12752/bb074aac/57ce649bNb5a7ef99.jpg',
                            channel : '',
                            callback: null
                        });
                    } catch (e) {
                        if (e.name === "JdShareException") {
                            alert(e.toString());
                        } else {
                            alert(e.message)
                        }
                    }
                    loadImg(function () {
                        floorInit();
                        apis.queryLottery(function (r) {
                            if (typeof r == 'string') {
                                r = JSON.parse(r);
                            }
                            if (r.errno == '0' && r.subCode == '1') {
                                apis.queryLottery(arguments.callee);
                            } else {
                                var leftLuckDrawNum = parseInt(r.leftLuckDrawNum);
                                var totalUsedNum = parseInt(r.totalTimes);
                                var maxDrawNum = parseInt(r.maxLuckDrawNum);
                                if (leftLuckDrawNum != NaN && r.leftLuckDrawNum > 0) {
                                    //alert('还没抽奖')
                                }
                                else{
                                    $('#wrapper').addClass('wrapper-no-chance');
                                    $('#wrapper .banner-ani-btn-tip img').attr('src','//img12.360buyimg.com/cms/jfs/t3229/166/2690551093/12196/f6cdf8c8/57e5059bNeee27669.png');
                                }
                            }
                        });
                    });

                })();

                //当前日期顺序对应品牌商品组id：
                var brandsGoods = ['00133338','00133339','00133340','00133341','00141665','00141667','00141669','00141671','00141685','00141691','00141692'];//360、乐视、小米、魅族
                var brandsAds = '00085912';
                //var brandsDate = ['0927','0928','0929','0930'];
                var brandsDate = ['0927','0928','0929','0930','1001','1002','1003','1004','1005','1006','1007'];
                var curIds = '';
                var curDate = new Date();
                var curDateMonth = curDate.getMonth()+1;
                var curDateDay = curDate.getDate();
                var curDateIndex = 0;//默认从品牌中第一个开始排序
                var initAdNo = 0;//广告renderIndex
                $(brandsDate).each(function(i,k){
                    if(curDateMonth == parseInt(k.substr(0,2)) && curDateDay == parseInt(k.substr(2,2))){
                        curDateIndex = i;
                        if(curDateIndex%2 != 0){
                            $('body').addClass('wrap-bg-1');
                        }
                        //curIds += brandsGoods[i]
                    }
                })
                $(brandsGoods).each(function(i,k){
                    curIds += ','+k;
                })
                curIds = curIds.substr(1,curIds.length-1);
                /* @fixme:all the code up */

                /* slider */
                var slider = {
                    //判断设备是否支持touch事件
                    touch:('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch,
                    slider:document.getElementById('bannerBalloonDiv'),

                    //事件
                    events:{
                        index:curDateIndex,     //显示元素的索引
                        slider:document.getElementById('bannerBalloonDiv'),
                        statusWrap:$('#bannerStatusWrap'),
                        icon:$('#bannerBalloonDiv .banner-balloon'),
                        marginLeftBase:290,
                        hideAniTime:350,
                        handleEvent:function(event){
                            var self = this;     //this指events对象
                            if(event.type == 'touchstart'){
                                self.start(event);
                            }else if(event.type == 'touchmove'){
                                self.move(event);
                            }else if(event.type == 'touchend'){
                                self.end(event);
                            }
                        },
                        //滑动开始
                        start:function(event){
                            var touch = event.targetTouches[0];     //touches数组对象获得屏幕上所有的touch，取第一个touch
                            startPos = {x:touch.pageX,y:touch.pageY,time:+new Date};    //取第一个touch的坐标值
                            isScrolling = 0;   //这个参数判断是垂直滚动还是水平滚动
                            this.slider.addEventListener('touchmove',this,false);
                            this.slider.addEventListener('touchend',this,false);
                        },
                        //移动
                        move:function(event){
                            //当屏幕有多个touch或者页面被缩放过，就不执行move操作
                            if(event.targetTouches.length > 1 || event.scale && event.scale !== 1) return;
                            var touch = event.targetTouches[0];
                            endPos = {x:touch.pageX - startPos.x,y:touch.pageY - startPos.y};
                            isScrolling = Math.abs(endPos.x) < Math.abs(endPos.y) ? 1:0;    //isScrolling为1时，表示纵向滑动，0为横向滑动
                            if(isScrolling === 0){
                                event.preventDefault();      //阻止触摸事件的默认行为，即阻止滚屏
                                //this.slider.className = 'cnt';
                                //this.slider.style.left = -this.index*600 + endPos.x + 'px';
                            }
                        },
                        //滑动释放
                        end:function(event){
                            var duration = +new Date - startPos.time;    //滑动的持续时间
                            var that = this;
                            if(isScrolling === 0){    //当为水平滚动时
                                this.icon.eq(this.index).removeClass('balloon-active').addClass('balloon-no-active');
                                if(Number(duration) > 10){
                                    //判断是左移还是右移，当偏移量大于10时执行
                                    if(endPos.x > 10){
                                        if(this.index !== 0) {
                                            this.index -= 1;
                                            this.statusWrap.removeClass('banner-status-wrap-show').addClass('banner-status-wrap-hide');
                                            /* 保证隐藏动画执行完之后再切换状态，否则会出现闪的画面 */
                                            setTimeout(function(){
                                                that.statusChange();
                                                that.statusWrap.removeClass('banner-status-wrap-hide').addClass('banner-status-wrap-show');
                                            },that.hideAniTime);
                                        }
                                    }else if(endPos.x < -10){
                                        if(this.index !== this.icon.length-1) {
                                            this.index += 1;
                                            this.statusWrap.removeClass('banner-status-wrap-show').addClass('banner-status-wrap-hide');
                                            setTimeout(function(){
                                                that.statusChange();
                                                that.statusWrap.removeClass('banner-status-wrap-hide').addClass('banner-status-wrap-show');
                                            },that.hideAniTime);
                                        }
                                    }
                                }
                                this.icon.eq(this.index).removeClass('balloon-no-active').addClass('balloon-active');
                                this.slider.style.marginLeft = this.marginLeftBase/(320/4.54) * (1 - 2*this.index) + 'rem';
                            }
                            //解绑事件
                            this.slider.removeEventListener('touchmove',this,false);
                            this.slider.removeEventListener('touchend',this,false);
                        },
                        statusChange:function(){
                            /* banner-status-active、banner-status-wks、banner-status-yjs */
                            if(this.index > curDateIndex){
                                this.statusWrap.removeClass('banner-status-active banner-status-yjs').addClass('banner-status-wks');
                                $('#wrapperGotCoupon').hide();
                            }
                            else if(this.index < curDateIndex){
                                this.statusWrap.removeClass('banner-status-active banner-status-wks').addClass('banner-status-yjs');
                                $('#wrapperGotCoupon').hide();
                            }
                            else{
                                this.statusWrap.removeClass('banner-status-yjs banner-status-wks').addClass('banner-status-active');
                                $('#wrapperGotCoupon').show();
                            }
                        }
                    },

                    //初始化
                    init:function(){
                        var self = this;     //this指slider对象
                        if(!!self.touch) self.slider.addEventListener('touchstart',self.events,false);    //addEventListener第二个参数可以传一个对象，会调用该对象的handleEvent属性
                        self.slider.style.marginLeft = self.events.marginLeftBase/(320/4.54) * (1 - 2*self.events.index) + 'rem';
                        $(self.events.icon).each(function(i,k){
                            if( i < self.events.index){
                                $(k).addClass('balloon-ed balloon-no-active');
                            }
                            else if( i == self.events.index){
                                $(k).addClass('balloon-ing balloon-active');
                                $(k).append('<span class="balloon-img-boom"></span>');
                            }
                            else{
                                $(k).addClass('balloon-to balloon-no-active');
                            }
                        })
                        //self.events.icon.eq(self.events.index).removeClass('balloon-no-active').addClass('balloon-active');
                    }
                };



                function floorInit(){
                    slider.init();//初始化slider
                    for( var i=0;i<brandsGoods.length;i++){
                        var oldHtml = $('.wrap-floor').html();
                        $('.wrap-floor').html(oldHtml + '<div id=wrapFloor' + i + '><div class="floor-hd"></div><div class="floor-bd"></div></div>');
                    }
                    renderRequst(0);//发送楼层标题请求
                    renderRequst(1);//发送楼层商品请求
                    //renderHeader();
                }

                function renderRequst(type){
                    //请求成功渲染模块
                    var success = function(data) {

                        var option = {
                            events: {
                                "tap .z-two": "gotoBranchHall",
                            },
                            init: function() {
                                if(type == 1){
                                    //为图片位置赋默认高度
                                    var jPushList = this.$el.find("#wrapFloor").children("a"),
                                            ws = 351,
                                            hs = Math.floor(ws * 290 / 345);
                                    jPushList.css("height", hs + "px");
                                }
                            },
                            gotoBranchHall: function(e) {
                                //do something
                                console.log(1);
                            }
                        }
                        if(type == 1){

                            var tIndex = brandsGoods.indexOf(data.groupId);
                            var optionDom = "#wrapFloor"+tIndex+" .floor-bd";
                            if(tIndex == curDateIndex){
                                optionDom = "#wrapFloor0 .floor-bd";
                            }
                            else if(tIndex < curDateIndex ){
                                var ttIndex = tIndex+1;
                                optionDom = "#wrapFloor"+ ttIndex +" .floor-bd";
                            }
                            else{

                            }
                            render(option, optionDom, $("#branchHallTpl").html(), data);
                            $(optionDom).addClass('wrap-flr'+tIndex);
                            $(optionDom).attr('data-name',data.groupName);
                        }
                        else if(type ==0){
                            var optionHdDom = "#wrapFloor"+initAdNo+" .floor-hd";
                            if(initAdNo == curDateIndex){
                                optionHdDom = "#wrapFloor0 .floor-hd";
                            }
                            else if(initAdNo < curDateIndex ){
                                var tIndex = initAdNo+1;
                                optionHdDom = "#wrapFloor"+ tIndex +" .floor-hd";

                            }
                            render(option, optionHdDom, $("#branchHallHdTpl").html(), data);
                            initAdNo++;
                        }
                        else{
                            render(option, "body", $("#branchHallTpl").html(), data);
                        }

                    }
                    getRequestData(success,type);
                }

                function getRequestData(success,type) {
                    var handleData = function(data) {
                        if(type == 1){
                            if (data.subCode == "0") {

                                $(data.list).each(function(i,k){

                                    var result = {
                                        list: k.groupInfoList[0] ? k.groupInfoList[0].groupInfoList : [],
                                        groupName: k ? k.groupName : "",
                                        groupId: k ? k.groupId : "0"
                                    };
                                    success(result);
                                })

                            } else {
                                util.toast("网络跑累了，请稍候再来！");
                            }
                        }
                        else if(type == 0){
                            if (data.subCode == "0") {

                                var tDataList = data.advertInfos[0].list;
                                var resultData = data;
                                var result = {
                                    list: '',
                                    groupName: ''
                                }
                                $(tDataList).each(function(i,k){
                                    resultData.advertInfos[0].list = [];
                                    resultData.advertInfos[0].list.push(tDataList[i]);
                                    result.list = resultData.advertInfos[0].list;
                                    success(result);
                                })
                                /*var result = {
                                 list: data.advertInfos[0] ? data.advertInfos[0].list : [],
                                 groupName: data.advertInfos[0] ? data.advertInfos[0].groupName : ""
                                 };
                                 success(result);*/

                            } else {
                                util.toast("网络跑累了，请稍候再来！");
                            }
                        }
                    };

                    var optionUrl = [
                        "http://ngw.m.jd.com/client.action?functionId=getBabelAdvertInfo&client=wh5&clientVersion=1.0.0",
                        "http://ngw.m.jd.com/client.action?functionId=getBabelProductInfo&client=wh5&clientVersion=1.0.0"
                    ];
                    var curData = '';
                    if(type == 0){
                        curData = brandsAds;
                    }
                    else if(type == 1){
                        curData = curIds;
                    }
                    var option = {
                        url: optionUrl[type],
                        data: {
                            ids: curData
                        },
                        success: handleData
                    };
                    request(option);
                }

                function render(option, el, template, data) {
                    var view = jw.view(option);
                    new view({
                        el: el,
                        template: template,
                        data: data
                    }).render();
                    //console.log('data',data);
                    if(data.groupId == '00141685'){
                        /* 生活旅行 */
                        $(el).find('.z-three a').attr('href','http://h5.m.jd.com/active/9XhaJo3b682RxdiGDSASo72UNso/index.html');
                    }
                    else if(data.groupId == '00141669'){
                        /* 一元抢宝 */
                        $(el).find('.z-three a').each(function(i,k){
                            $(k).attr('href',specialHref[i]);
                        })
                    }
                };
                var timeOutEvent=0;
                $('#startBtn,#startTextBtn').on({
                    touchstart: function(e){
                        apis.isLogin();
                        if( $('.balloon-active').attr('class').indexOf('balloon-ing') > 0 && $('#wrapper').attr('class').indexOf('wrapper-no-chance') < 0){
                            $('.balloon-active').addClass('balloon-active-boom');//气球动画
                            $('#bannerStatusWrap').addClass('banner-status-ani');//打气动画
                            timeOutEvent = setTimeout(function(){
                                longPress();
                            },2000);
                        }
                        e.preventDefault();
                    },
                    touchmove: function(){
                        /*alert('move');
                        clearTimeout(timeOutEvent);
                        timeOutEvent = 0;*/
                    },
                    touchend: function(){
                        clearTimeout(timeOutEvent);
                        if(timeOutEvent!=0 && $('.balloon-active').attr('class').indexOf('balloon-ing') > 0 && $('#wrapper').attr('class').indexOf('wrapper-no-chance') < 0){
                            $('.balloon-active').removeClass('balloon-active-boom').addClass('balloon-active-boom-pause');
                            $('#bannerStatusWrap').removeClass('banner-status-ani');//打气动画暂停复位
                            $('#wrapperError p').html('长按打爆气球<br>才能获得优惠券哦~');
                            $('#wrapperError').fadeIn();
                            setTimeout(function(){
                                $('.balloon-active').removeClass('balloon-active-boom-pause');
                                $('#wrapperError').fadeOut();
                            },1000)
                        }
                        return false;
                    }
                });
                function longPress(){
                    timeOutEvent = 0;
                    apis.lottery();
                }
                $('#btnRule')
                        .on('tap', function () {
                            ruleControl.show();
                            return false;
                        });
                $('#closeRule,#closeRule1')
                        .on('click', function () {
                            ruleControl.hide();
                            return false;
                        });
                $('#closeBtn2,#shoppingBtn')
                        .on('click', function () {
                            $('#wrapperSuccess').fadeOut();
                            return false;
                        });
                $('#shareBtn')
                        .on('tap', function () {
                            try {
                                jdShare && jdShare.callSharePane({
                                    title   : 'Joy手机游乐园  品牌打卡赢神券',
                                    content : 'Joy手机游乐园  品牌打卡赢神券',
                                    url     : 'http://h5.m.jd.com/active/3SuRYXJPCmnjBnib1FUVhUmvTG3/index.html',
                                    img     : 'http://img12.360buyimg.com/cms/jfs/t3052/363/1513970130/12752/bb074aac/57ce649bNb5a7ef99.jpg',
                                    channel : '',
                                    callback: function () {
                                        $('#closeBtn2').trigger('click');
                                    }
                                });
                            } catch (e) {
                                if (e.name === "JdShareException") {
                                    alert(e.toString());
                                } else {
                                    alert(e.message)
                                }
                            }
                            return false;
                        });
            })
        </script>
	</textarea>
            </div>
        </div>
        <div class="bab_opt_footer hide"></div>
    </div>
</div>
<!--E container -->
<script src="//static.360buyimg.com/jdcsh/babel/dist/js/babelparser.js" async defer></script>
</body>
</html>